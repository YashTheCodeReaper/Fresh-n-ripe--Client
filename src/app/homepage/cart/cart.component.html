<div class="container">
  <h1>
    Your <span>Cart({{ cartProductsWithCount.length }})</span>
  </h1>
  <div class="bar"></div>
  <table *ngIf="cartProductsWithCount">
    <thead>
      <th>Product</th>
      <th>Price</th>
      <th>Quantity</th>
      <th>Total</th>
    </thead>
    <tr
      style="--i:{{ i }}"
      *ngFor="let cartProduct of cartProductsWithCount; let i = index"
    >
      <td class="product-grid">
        <div class="image-container">
          <img src="{{ cartProduct.product.image }}" alt="img" />
        </div>
        <div class="product-detail-container">
          <h2>{{ cartProduct.product.name }}</h2>
          <p>{{ cartProduct.product.description }}</p>
          <h3>₹{{ cartProduct.product.mrp }}</h3>
        </div>
      </td>
      <td class="price">₹{{ cartProduct.product.price }}</td>
      <td>
        <div class="button-flex">
          <button
            (click)="onRemoveItem(cartProduct.product.id, cartProduct.count)"
          >
            -
          </button>
          <p>{{ cartProduct.count }}</p>
          <button
            (click)="onAddItem(cartProduct.product.id, cartProduct.count)"
          >
            +
          </button>
        </div>
      </td>
      <td class="total">
        ₹{{ cartProduct.count * cartProduct.product.price
        }}<i
          (click)="onDeleteItem(cartProduct.product.id, cartProduct.count)"
          class="icon fa-solid fa-trash"
        ></i>
      </td>
    </tr>
    <div class="divider"></div>
    <div class="summary">
      <div class="subtotal">
        <h3>Subtotal:</h3>
        <span class="subtotal-span">₹{{ getSubTotal() }}</span>
      </div>
      <div class="protection">
        <i
          (click)="appendProtection()"
          [ngClass]="{ 'protect-icon-active': addProtection }"
          class="protect-icon fa-solid fa-shield"
        ></i>
        <p id="para">Add shipping protection to your order.</p>
        <p>₹75</p>
      </div>
      <button class="checkout-button" routerLink="/checkout">Checkout</button>
    </div>
  </table>
</div>
